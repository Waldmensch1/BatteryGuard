/**
 * Battery Guard Multi-Device Monitor - Configuration Template
 * 
 * INSTRUCTIONS:
 * 1. Copy this file to config.h
 * 2. Fill in your device details below
 * 3. config.h is git-ignored for security
 */

#ifndef CONFIG_H
#define CONFIG_H

#include <Arduino.h>
#include "types.h"

// ============================================================================
// AES Encryption Key (Static - same for all devices)
// ============================================================================
// CHANGE THIS: Replace with your actual AES key

// intAct Battery Guard, BM6
const uint8_t AES_KEY_1[16] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

// Ancel BM300 pro Key, BM2
const uint8_t AES_KEY_2[16] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

// ============================================================================
// Device Configuration (Up to 4 devices)
// ============================================================================
const DeviceConfig DEVICES[] = {
    {
        .serial = "XXXXXXXXXXXX",           // CHANGE: Your device MAC without colons
        .name = "Battery #1",
        .mqttName = "battery1",             // MQTT topic name (no spaces, lowercase recommended)
        .type = LEAD_ACID,
        .enabled = true,
        .key = AES_KEY_1
    },
    {
        .serial = "XXXXXXXXXXXX",
        .name = "Battery #2",
        .mqttName = "battery2",
        .type = AGM,
        .enabled = false,
        .key = AES_KEY_1
    },
    {
        .serial = "XXXXXXXXXXXX",
        .name = "Battery #3",
        .mqttName = "battery3",
        .type = LEAD_ACID,
        .enabled = false,
        .key = AES_KEY_1
    },
    {
        .serial = "XXXXXXXXXXXX",
        .name = "Battery #4",
        .mqttName = "battery4",
        .type = AGM,
        .enabled = false,
        .key = AES_KEY_1
    }
};

const uint8_t DEVICE_COUNT = sizeof(DEVICES) / sizeof(DEVICES[0]);

// ============================================================================
// MQTT Configuration (Only for release-mqtt/debug-mqtt builds)
// ============================================================================
#define WIFI_SSID "your_wifi_ssid"              // CHANGE: Your WiFi SSID
#define WIFI_PASSWORD "your_wifi_password"      // CHANGE: Your WiFi password

#define MQTT_SERVER "192.168.1.100"             // CHANGE: Your MQTT broker IP/hostname
#define MQTT_PORT 1883                          // MQTT broker port (usually 1883)
// #define MQTT_USERNAME "username"             // Uncomment if authentication required
// #define MQTT_PASSWORD "password"             // Uncomment if authentication required

#define MQTT_PREFIX "home/batteries"            // CHANGE: Your MQTT topic prefix
                                                // Full topic: <prefix>/batteryguard/<mqttName>
                                                // Example: home/batteries/batteryguard/battery1

#define MQTT_UPDATE_INTERVAL 60                 // Update interval in seconds (default: 60)
#define MQTT_RETAINED false                     // Retain MQTT messages (true/false)

// Home Assistant Auto-Discovery
// Enable this to automatically register sensors in Home Assistant
#define HOMEASSIST_FORMAT                       // Uncomment to enable Home Assistant discovery

// ============================================================================
// BLE Configuration
// ============================================================================
const uint32_t SCAN_INTERVAL = 100;         // Scan interval in 0.625ms units (62.5ms)
const uint32_t SCAN_WINDOW = 80;            // Scan window in 0.625ms units (50ms)
const uint32_t SCAN_DURATION = 5;           // Scan duration in seconds (0 = continuous)

const uint32_t CONNECT_TIMEOUT_MS = 10000;  // Connection timeout (10 seconds)
const uint8_t MAX_CONNECT_RETRIES = 3;      // Retry attempts before cooldown
const uint32_t RETRY_COOLDOWN_MS = 30000;   // Cooldown after failed retries (30 seconds)

// ============================================================================
// Monitoring Configuration
// ============================================================================
const uint32_t NOTIFICATION_TIMEOUT_MS = 60000;  // Notification timeout (60 seconds)
const uint32_t RECONNECT_DELAY_MS = 2000;        // Delay before reconnect attempt (2 seconds)

#endif // CONFIG_H
